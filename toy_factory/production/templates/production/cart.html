{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/cart.css' %}">
<h2 class="cart-title">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>

{% if items %}
  <div class="cart-items">
    {% for item in items %}
      <div class="cart-item">
        <div class="item-info">
          <h3 class="item-name">{{ item.toy.name }}</h3>
          <p class="item-price">–¶–µ–Ω–∞: {{ item.toy.price|floatformat:2 }} ‚ÇΩ</p>
          <p class="item-total">–ò—Ç–æ–≥–æ: {{ item.total_price|floatformat:2 }} ‚ÇΩ</p>
        </div>

        <div class="item-actions">
          <form action="{% url 'production:update_cart_item' item.id 'increase' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn small">+</button>
          </form>

          <span class="item-quantity">{{ item.quantity }}</span>

          <form action="{% url 'production:update_cart_item' item.id 'decrease' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn small">-</button>
          </form>

          <form action="{% url 'production:update_cart_item' item.id 'remove' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn danger">–£–¥–∞–ª–∏—Ç—å</button>
          </form>
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="cart-summary">
    <h3>–ò—Ç–æ–≥–æ: <span>{{ total|floatformat:2 }} ‚ÇΩ</span></h3>
    <form action="{% url 'production:checkout' %}" method="post">
      {% csrf_token %}
      <button type="submit" class="btn primary">üí≥ –û–ø–ª–∞—Ç–∏—Ç—å</button>
    </form>
  </div>

{% else %}
  <p class="empty-cart">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üõçÔ∏è</p>
{% endif %}
{% endblock %}
